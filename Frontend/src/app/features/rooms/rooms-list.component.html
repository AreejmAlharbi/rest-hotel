<section class="min-h-screen bg-slate-900 text-slate-100">
  <!-- Hero -->
  <div class="bg-gradient-to-b from-slate-800 to-slate-700 py-10">
    <div class="mx-auto max-w-7xl px-6 text-center">
      <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight">
        {{ 'roomsAll.heroTitle' | translate }}
      </h1>
      <p class="mt-2 text-slate-200/90">
        {{ 'roomsAll.heroSubtitle' | translate }}
      </p>
    </div>
  </div>

  <!-- Filters -->
  <div class="mx-auto max-w-7xl px-6 -mt-8">
    <form [formGroup]="form"
          class="rounded-[18px] bg-[#F3ECE1] text-slate-800 shadow-xl ring-1 ring-[#E6D9C9] p-6 md:p-8">
      <div class="grid gap-4 md:grid-cols-5">
        <!-- Search -->
        <div class="md:col-span-2">
          <label class="block text-sm font-semibold text-slate-600 mb-2">
            {{ 'roomsAll.filters.searchLabel' | translate }}
          </label>
          <input type="text"
                 formControlName="q"
                 [placeholder]="'roomsAll.filters.searchPh' | translate"
                 class="w-full h-[44px] rounded-xl border border-[#E6D9C9] bg-white px-3 outline-none focus:ring-2 focus:ring-slate-400">
        </div>

        <!-- Capacity -->
        <div>
          <label class="block text-sm font-semibold text-slate-600 mb-2">
            {{ 'roomsAll.filters.capacityLabel' | translate }}
          </label>
          <select formControlName="capacity"
                  class="w-full h-[44px] rounded-xl border border-[#E6D9C9] bg-white px-3 outline-none focus:ring-2 focus:ring-slate-400">
            <option value="any">{{ 'roomsAll.filters.capacityAny' | translate }}</option>
            <option value="1">1+</option>
            <option value="2">2+</option>
            <option value="3">3+</option>
            <option value="4">4+</option>
            <option value="5">5+</option>
          </select>
        </div>

        <!-- Sort -->
        <div>
          <label class="block text-sm font-semibold text-slate-600 mb-2">
            {{ 'roomsAll.filters.sortLabel' | translate }}
          </label>
          <select formControlName="sort"
                  class="w-full h-[44px] rounded-xl border border-[#E6D9C9] bg-white px-3 outline-none focus:ring-2 focus:ring-slate-400">
            <option value="latest">{{ 'roomsAll.filters.sortLatest' | translate }}</option>
            <option value="priceAsc">{{ 'roomsAll.filters.sortPriceAsc' | translate }}</option>
            <option value="priceDesc">{{ 'roomsAll.filters.sortPriceDesc' | translate }}</option>
            <option value="capacity">{{ 'roomsAll.filters.sortCapacity' | translate }}</option>
          </select>
        </div>

        <!-- Reset -->
        <div class="flex items-end">
          <button type="button"
                  (click)="resetFilters()"
                  class="w-full rounded-xl bg-slate-800 text-white px-4 py-2 hover:bg-slate-700 transition">
            {{ 'roomsAll.filters.reset' | translate }}
          </button>
        </div>
      </div>
    </form>
  </div>

  <!-- Content -->
  <div class="mx-auto max-w-7xl px-6 py-10">
    @if (loading()) {
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        @for (n of [1,2,3,4,5,6]; track n) {
          <div class="rounded-2xl bg-white/5 ring-1 ring-white/10 shadow-sm p-4 animate-pulse">
            <div class="aspect-[4/3] rounded-xl bg-white/10"></div>
            <div class="mt-3 h-4 bg-white/10 rounded w-2/3"></div>
            <div class="mt-2 h-4 bg-white/10 rounded w-1/3"></div>
          </div>
        }
      </div>
    } @else if (filtered().length === 0) {
      <p class="text-slate-300">
        {{ 'roomsAll.empty' | translate }}
      </p>
    } @else {
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        @for (room of filtered(); track room.id) {
          <article
            class="group rounded-2xl bg-white/5 ring-1 ring-white/10 shadow-sm hover:shadow-lg
                   transition transform hover:-translate-y-1.5">

            <!-- Image -->
            <div class="relative aspect-[4/3] overflow-hidden rounded-t-2xl">
              <img
                [ngSrc]="room.imageUrl || 'assets/rooms/room1.jpg'"
                width="800" height="600"
                [attr.alt]="('room.imageAlt' | translate:{ num: room.roomNumber })"
                class="h-full w-full object-cover group-hover:scale-105 transition" />
            </div>

            <!-- Details -->
            <div class="p-4">
              <div class="flex items-center justify-between">
                <h3 class="font-semibold text-white line-clamp-1">
                  {{ 'room.title' | translate:{ num: room.roomNumber } }}
                </h3>
                <div class="text-sm text-slate-300">ðŸ‘¥ {{ room.capacity }}</div>
              </div>

              <div class="mt-3 flex items-end justify-between">
                <div class="text-white font-semibold">
                  {{ room.price | currency:'SAR' }}{{ 'room.perNight' | translate }}
                </div>

                <a [routerLink]="['/rooms', room.id]"
                   class="rounded-xl bg-slate-800 text-white px-4 py-2 text-sm hover:bg-slate-700">
                  {{ 'common.view' | translate }}
                </a>
              </div>

              <div class="mt-3">
                <span
                  [ngClass]="{
                    'inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs': true,
                    'bg-emerald-500/15 text-emerald-400': room.isAvailable,
                    'bg-rose-500/15 text-rose-400': !room.isAvailable
                  }">
                  <span class="material-icons-outlined text-[14px]">
                    {{ room.isAvailable ? 'check_circle' : 'cancel' }}
                  </span>
                  {{ room.isAvailable ? ('roomDetail.available' | translate) : ('roomDetail.unavailable' | translate) }}
                </span>
              </div>
            </div>
          </article>
        }
      </div>
    }
  </div>
</section>
