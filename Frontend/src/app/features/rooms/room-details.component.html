<!-- Back Button -->
<a routerLink="/"
   class="inline-flex items-center gap-3 text-slate-400 hover:text-white transition mt-10 mb-4 px-6 py-3 rounded-2xl bg-slate-800/80 text-xl font-bold shadow-lg">
  <span class="material-icons-outlined text-2xl">arrow_back</span>
  <span class="font-bold tracking-wide">{{ 'nav.home' | translate }}</span>
</a>

<!-- Title centered -->
<h1 class="mt-2 text-5xl md:text-6xl font-black tracking-tight text-white drop-shadow-lg text-center">
  {{ 'roomDetails.title' | translate }}
</h1>

<section class="mt-10">
  <div *ngIf="room() as r; else loading">
    <div class="grid gap-10 lg:grid-cols-12">

      <!-- LEFT: Image -->
      <figure class="lg:col-span-6 lg:translate-x-[24px] relative rounded-3xl overflow-hidden shadow-2xl">
        <img
          [src]="r.imageUrl || 'assets/rooms/room1.jpg'"
          [attr.alt]="'roomDetail.imageAlt' | translate:{ num: r.roomNumber }"
          class="w-full h-[650px] object-cover scale-105 transition duration-500"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent"></div>
      </figure>

      <!-- RIGHT: Booking Card -->
      <div class="lg:col-span-6 flex items-center justify-center">
        <div class="w-full max-w-[500px] rounded-3xl bg-white/70 backdrop-blur-lg shadow-2xl ring-1 ring-[#e6d9c9]/40 p-10 min-h-[650px] flex flex-col">

          <!-- Status Badge -->
          <div class="flex justify-end mb-6">
            <span
              class="inline-flex items-center h-9 rounded-full px-4 text-base font-semibold shadow ring-1 self-end"
              [ngClass]="{
                'bg-emerald-500/20 text-emerald-700 ring-emerald-400/40': r.isAvailable,
                'bg-rose-500/20 text-rose-600 ring-rose-400/40': !r.isAvailable
              }"
            >
              <span class="material-icons-outlined mr-2 text-lg" *ngIf="r.isAvailable">check_circle</span>
              <span class="material-icons-outlined mr-2 text-lg" *ngIf="!r.isAvailable">cancel</span>
              {{ r.isAvailable ? ('roomDetail.available' | translate) : ('roomDetail.unavailable' | translate) }}
            </span>
          </div>

          <!-- Room Title -->
          <p class="uppercase tracking-widest text-4xl text-[#8b725b] font-semibold mb-2">
            {{ 'roomDetail.label' | translate }}
          </p>

          <!-- Room Number -->
          <h2 class="text-xl font-extrabold text-slate-900 mb-4 drop-shadow-sm">
            {{ 'roomDetail.roomNumberLabel' | translate }}: {{ r.roomNumber }}
          </h2>

          <!-- Description -->
          <p class="text-lg text-slate-600 line-clamp-2 italic mb-8">
            {{ 'roomDetail.descriptionLabel' | translate }}: {{ r.description || '—' }}
          </p>

          <!-- Capacity and Price -->
          <div class="flex items-center gap-6 text-slate-700 mb-8">
            <!-- Capacity (لا يوجد مفتاح في JSON، نبقي النص كما هو) -->
            <div class="flex items-center gap-2">
              <span class="material-icons-outlined text-lg">meeting_room</span>
              <span class="text-lg font-medium">{{ 'roomDetail.capacity' | translate }}</span>
              <span class="inline-flex items-center rounded-full bg-slate-900/90 text-white px-4 py-1 text-lg font-semibold">
                {{ r.capacity }}
              </span>
            </div>
            <!-- Price -->
            <div class="flex items-center gap-2">
              <span class="material-icons-outlined text-lg">payments</span>
              <span class="inline-flex items-center rounded-full bg-gradient-to-r from-amber-400 to-yellow-300 text-slate-900 px-5 py-1 text-lg font-bold shadow">
                {{ r.price | currency:'SAR' }}
                <span class="text-sm font-normal ml-1">{{ 'room.perNight' | translate }}</span>
              </span>
            </div>
          </div>

          <!-- Booking Form -->
          <form [formGroup]="form" (ngSubmit)="book()" class="space-y-7 flex-1">
            <!-- Guest Name -->
            <div>
              <div class="flex items-center mb-2">
                <span class="material-icons-outlined text-slate-700 mr-2">person</span>
                <span class="text-lg font-bold text-slate-700">{{ 'bookingInfo.guestName' | translate }}</span>
              </div>
              <mat-form-field appearance="outline" class="w-full">
                <input
                  matInput
                  formControlName="guestName"
                  [placeholder]="'bookingInfo.guestNamePh' | translate" />
                <mat-error *ngIf="form.get('guestName')?.touched && form.get('guestName')?.invalid">
                  {{ 'bookingInfo.guestNameErr' | translate }}
                </mat-error>
              </mat-form-field>
            </div>

            <!-- Dates -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-7">
              <div>
                <div class="flex items-center mb-2">
                  <span class="material-icons-outlined text-slate-700 mr-2">login</span>
                  <span class="text-lg font-bold text-slate-700">{{ 'booking.checkIn' | translate }}</span>
                </div>
                <mat-form-field appearance="outline" class="w-full">
                  <input
                    matInput
                    [matDatepicker]="dpIn"
                    formControlName="checkInDate"
                    [placeholder]="'booking.datePlaceholder' | translate" />
                  <mat-datepicker-toggle matSuffix [for]="dpIn"></mat-datepicker-toggle>
                  <mat-datepicker #dpIn></mat-datepicker>
                  <mat-error *ngIf="form.get('checkInDate')?.touched && form.get('checkInDate')?.invalid">
                    {{ 'bookingInfo.checkInErr' | translate }}
                  </mat-error>
                </mat-form-field>
              </div>

              <div>
                <div class="flex items-center mb-2">
                  <span class="material-icons-outlined text-slate-700 mr-2">logout</span>
                  <span class="text-lg font-bold text-slate-700">{{ 'booking.checkOut' | translate }}</span>
                </div>
                <mat-form-field appearance="outline" class="w-full">
                  <input
                    matInput
                    [matDatepicker]="dpOut"
                    formControlName="checkOutDate"
                    [placeholder]="'booking.datePlaceholder' | translate" />
                  <mat-datepicker-toggle matSuffix [for]="dpOut"></mat-datepicker-toggle>
                  <mat-datepicker #dpOut></mat-datepicker>
                  <mat-error *ngIf="form.get('checkOutDate')?.touched && form.get('checkOutDate')?.invalid">
                    {{ 'bookingInfo.checkOutErr' | translate }}
                  </mat-error>
                </mat-form-field>
              </div>
            </div>

            <button
              type="submit"
              class="mt-8 w-full h-14 rounded-2xl bg-gradient-to-r from-slate-800 to-slate-600 hover:from-slate-700 hover:to-slate-500 text-white font-bold tracking-wide shadow-lg transition">
              {{ 'bookButtons.bookNow' | translate }}
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <ng-template #loading>
    <div class="text-slate-300 text-xl font-medium">{{ 'roomLoading' | translate }}</div>
  </ng-template>
</section>
