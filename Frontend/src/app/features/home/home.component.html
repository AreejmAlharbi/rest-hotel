<!-- HERO -->
<section class="relative overflow-hidden bg-gradient-to-b from-slate-800 to-slate-700 text-slate-100">
  <div class="mx-auto max-w-7xl px-6 py-16 md:py-20 text-center">
    <!-- عنوان بالوسط -->
    <h1 class="text-5xl md:text-6xl font-extrabold tracking-tight text-white">
      {{ 'home.heroTitle' | translate }}
    </h1>
    <p class="mt-4 text-slate-200/90 text-lg">
      {{ 'home.heroSubtitle' | translate }}
    </p>

    <div class="mt-10 rounded-[24px] bg-slate-50 text-slate-800 shadow-2xl ring-1 ring-slate-200">
      <div class="p-5 md:p-6">
        <form [formGroup]="form" (ngSubmit)="onSearch()"
              class="grid grid-cols-1 md:grid-cols-[1fr_1fr_auto] gap-4 items-end">

          <!-- CHECK IN -->
          <div>
            <label class="block text-sm font-semibold text-slate-600 mb-2 text-center md:text-left">
              {{ 'booking.checkIn' | translate }}
            </label>
            <mat-form-field appearance="outline" class="w-full" color="primary">
              <input matInput [matDatepicker]="inPicker"
                     [placeholder]="'booking.datePlaceholder' | translate"
                     formControlName="checkIn">
              <mat-datepicker-toggle matSuffix [for]="inPicker"></mat-datepicker-toggle>
              <mat-datepicker #inPicker></mat-datepicker>
            </mat-form-field>
          </div>

          <!-- CHECK OUT -->
          <div>
            <label class="block text-sm font-semibold text-slate-600 mb-2 text-center md:text-left">
              {{ 'booking.checkOut' | translate }}
            </label>
            <mat-form-field appearance="outline" class="w-full" color="primary">
              <input matInput [matDatepicker]="outPicker"
                     [min]="form.value.checkIn"
                     [placeholder]="'booking.datePlaceholder' | translate"
                     formControlName="checkOut">
              <mat-datepicker-toggle matSuffix [for]="outPicker"></mat-datepicker-toggle>
              <mat-datepicker #outPicker></mat-datepicker>
            </mat-form-field>
          </div>

          <div class="md:self-start md:mt-8">
            <button type="submit"
                    class="w-full md:w-56 h-[56px] rounded-full bg-slate-600 hover:bg-slate-500 text-white font-semibold transition">
              {{ 'buttons.search' | translate }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- AVAILABLE ROOMS (تظهر بعد البحث) -->
<section *ngIf="results() !== null" class="bg-slate-50">
  <div class="mx-auto max-w-7xl px-6 py-10">
    <h2 class="text-2xl font-bold text-slate-900">
      {{ 'home.availableRooms' | translate }}
    </h2>

    <div *ngIf="searching()" class="mt-6 text-slate-600">
      {{ 'common.searching' | translate }}
    </div>

    <div *ngIf="!searching() && results()?.length === 0" class="mt-6 text-slate-600">
      {{ 'home.noRoomsSelectedDates' | translate }}
    </div>

    <div *ngIf="!searching() && (results()?.length || 0) > 0"
         class="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      <article *ngFor="let room of results()"
               class="group rounded-2xl bg-white ring-1 ring-slate-200 shadow-sm hover:shadow-lg transition">
        <div class="relative aspect-[4/3] overflow-hidden rounded-t-2xl">
          <img [src]="room.imageUrl || 'assets/placeholder/room.jpg'"
               class="h-full w-full object-cover group-hover:scale-105 transition"
               [alt]="'room.imageAlt' | translate:{ num: room.roomNumber }">
        </div>
        <div class="p-4">
          <div class="flex items-center justify-between">
            <h3 class="font-semibold text-slate-900 line-clamp-1">
              {{ 'room.title' | translate:{ num: room.roomNumber } }}
            </h3>
            <div class="text-sm text-slate-600">👥 {{ room.capacity }}</div>
          </div>
          <div class="mt-3 flex items-end justify-between">
            <div class="text-slate-900 font-semibold">
              {{ room.price | currency:'SAR' }}{{ 'room.perNight' | translate }}
            </div>
            <a class="rounded-xl bg-slate-800 text-white px-4 py-2 text-sm hover:bg-slate-700"
               [routerLink]="['/rooms', room.id]">
              {{ 'common.view' | translate }}
            </a>
          </div>
        </div>
      </article>
    </div>
  </div>
</section>

<!-- LATEST ROOMS -->
<section class="bg-slate-50">
  <div class="mx-auto max-w-7xl px-6 py-12">
    <div class="flex items-end justify-between">
      <h2 class="text-2xl font-bold text-slate-900">
        {{ 'home.latestRooms' | translate }}
      </h2>
      <a routerLink="/rooms" class="text-sm text-blue-700 hover:underline">
        {{ 'common.seeAll' | translate }}
      </a>
    </div>

    @if (latestRooms() === null) {
      <!-- سكلتون أثناء التحميل -->
      <div class="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        @for (n of [1,2,3]; track n) {
          <div class="rounded-2xl bg-white ring-1 ring-slate-200 shadow-sm p-4 animate-pulse">
            <div class="aspect-[4/3] rounded-xl bg-slate-200"></div>
            <div class="mt-3 h-4 bg-slate-200 rounded w-2/3"></div>
            <div class="mt-2 h-4 bg-slate-200 rounded w-1/3"></div>
          </div>
        }
      </div>
    } @else if (latestRooms()?.length === 0) {
      <p class="mt-6 text-slate-600">
        {{ 'home.noRoomsYet' | translate }}
      </p>
    } @else {
      <div class="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        @for (room of latestRooms(); track room.id) {
          <article revealOnScroll
            class="group rounded-2xl bg-white ring-1 ring-slate-200 shadow-sm hover:shadow-lg
                   transition transform hover:-translate-y-1.5">
            <!-- الصورة -->
            <div class="relative aspect-[4/3] overflow-hidden rounded-t-2xl">
              <img [src]="room.imageUrl || 'assets/placeholder/room.jpg'"
                   [alt]="'room.imageAlt' | translate:{ num: room.roomNumber }"
                   class="h-full w-full object-cover group-hover:scale-105 transition" />
            </div>

            <!-- التفاصيل -->
            <div class="p-4">
              <div class="flex items-center justify-between">
                <h3 class="font-semibold text-slate-900 line-clamp-1">
                  {{ 'room.title' | translate:{ num: room.roomNumber } }}
                </h3>
                <div class="text-sm text-slate-600">👥 {{ room.capacity }}</div>
              </div>
              <div class="mt-3 flex items-end justify-between">
                <div class="text-slate-900 font-semibold">
                  {{ room.price | currency:'SAR ' }} {{ 'room.perNight' | translate }} 
                </div>
                <a [routerLink]="['/rooms', room.id]"
                   class="rounded-xl bg-slate-800 text-white px-4 py-2 text-sm hover:bg-slate-700">
                  {{ 'common.view' | translate }}
                </a>
              </div>
            </div>
          </article>
        }
      </div>
    }
  </div>
</section>

<!-- SERVICES / AMENITIES -->
<section class="bg-[#D8C7B6]">
  <div class="mx-auto max-w-7xl px-6 py-14">
    <h2 class="text-3xl font-bold text-white text-center">
      {{ 'home.servicesTitle' | translate }}
    </h2>
    <p class="mt-2 text-white/80 text-center">
      {{ 'home.servicesSubtitle' | translate }}
    </p>

    <div class="mt-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">

      <!-- 24/7 Concierge -->
      <article revealOnScroll
        class="group rounded-3xl bg-[#F3ECE1] ring-1 ring-[#E6D9C9] shadow-sm p-8
               hover:-translate-y-1.5 hover:shadow-lg transition transform will-change-transform">
        <div class="h-14 w-14 rounded-full bg-slate-800 text-white flex items-center justify-center">
          <span class="material-icons-outlined text-3xl">room_service</span>
        </div>
        <h3 class="mt-4 font-semibold text-[#1f2937]">
          {{ 'services.concierge' | translate }}
        </h3>
        <p class="mt-1 text-[#334155] text-sm">
          {{ 'services.conciergeDesc' | translate }}
        </p>
      </article>

      <!-- Luxury Spa -->
      <article revealOnScroll
        class="group rounded-3xl bg-[#F3ECE1] ring-1 ring-[#E6D9C9] shadow-sm p-8
               hover:-translate-y-1.5 hover:shadow-lg transition transform will-change-transform">
        <div class="h-14 w-14 rounded-full bg-slate-800 text-white flex items-center justify-center">
          <span class="material-icons-outlined text-3xl">spa</span>
        </div>
        <h3 class="mt-4 font-semibold text-[#1f2937]">
          {{ 'services.spa' | translate }}
        </h3>
        <p class="mt-1 text-[#334155] text-sm">
          {{ 'services.spaDesc' | translate }}
        </p>
      </article>

      <!-- Fine Dining -->
      <article revealOnScroll
        class="group rounded-3xl bg-[#F3ECE1] ring-1 ring-[#E6D9C9] shadow-sm p-8
               hover:-translate-y-1.5 hover:shadow-lg transition transform will-change-transform">
        <div class="h-14 w-14 rounded-full bg-slate-800 text-white flex items-center justify-center">
          <span class="material-icons-outlined text-3xl">restaurant</span>
        </div>
        <h3 class="mt-4 font-semibold text-[#1f2937]">
          {{ 'services.dining' | translate }}
        </h3>
        <p class="mt-1 text-[#334155] text-sm">
          {{ 'services.diningDesc' | translate }}
        </p>
      </article>

      <!-- Heated Pool -->
      <article revealOnScroll
        class="group rounded-3xl bg-[#F3ECE1] ring-1 ring-[#E6D9C9] shadow-sm p-8
               hover:-translate-y-1.5 hover:shadow-lg transition transform will-change-transform">
        <div class="h-14 w-14 rounded-full bg-slate-800 text-white flex items-center justify-center">
          <span class="material-icons-outlined text-3xl">pool</span>
        </div>
        <h3 class="mt-4 font-semibold text-[#1f2937]">
          {{ 'services.pool' | translate }}
        </h3>
        <p class="mt-1 text-[#334155] text-sm">
          {{ 'services.poolDesc' | translate }}
        </p>
      </article>

      <!-- Fitness Center -->
      <article revealOnScroll
        class="group rounded-3xl bg-[#F3ECE1] ring-1 ring-[#E6D9C9] shadow-sm p-8
               hover:-translate-y-1.5 hover:shadow-lg transition transform will-change-transform">
        <div class="h-14 w-14 rounded-full bg-slate-800 text-white flex items-center justify-center">
          <span class="material-icons-outlined text-3xl">fitness_center</span>
        </div>
        <h3 class="mt-4 font-semibold text-[#1f2937]">
          {{ 'services.fitness' | translate }}
        </h3>
        <p class="mt-1 text-[#334155] text-sm">
          {{ 'services.fitnessDesc' | translate }}
        </p>
      </article>

      <!-- Valet Parking -->
      <article revealOnScroll
        class="group rounded-3xl bg-[#F3ECE1] ring-1 ring-[#E6D9C9] shadow-sm p-8
               hover:-translate-y-1.5 hover:shadow-lg transition transform will-change-transform">
        <div class="h-14 w-14 rounded-full bg-slate-800 text-white flex items-center justify-center">
          <span class="material-icons-outlined text-3xl">local_parking</span>
        </div>
        <h3 class="mt-4 font-semibold text-[#1f2937]">
          {{ 'services.parking' | translate }}
        </h3>
        <p class="mt-1 text-[#334155] text-sm">
          {{ 'services.parkingDesc' | translate }}
        </p>
      </article>

    </div>
  </div>
</section>

<app-contact-section id="contact" class="scroll-mt-24"></app-contact-section>
